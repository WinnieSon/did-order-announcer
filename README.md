# 바코드 리더 시스템

시리얼 포트를 통해 바코드 데이터를 읽어 서버로 전송하는 시스템입니다.

## 프로젝트 구조

```
did-order-announcer/
├── main.py              # 메인 실행 파일
├── config.py            # 설정값들 (포트, URL, 명령어 등)
├── barcode_reader.py    # 바코드 리더 관련 기능 (시리얼 통신, 헬스체크)
├── server_client.py     # 서버 통신 관련 기능
├── monitor.py           # 시스템 상태 모니터링
├── ui_utils.py          # UI 관련 유틸리티 (경고 메시지)
└── post_backup.py       # 기존 단일 파일 백업
```

## 모듈별 역할

### config.py
- 시리얼 포트 설정 (포트명, 보드레이트)
- 서버 설정 (API URL, 호스트)
- 모니터링 간격 설정
- 헬스체크 명령어 및 응답 패턴

### barcode_reader.py
- 시리얼 포트 연결 관리
- 바코드 데이터 읽기 및 처리
- 바코드 리더기 헬스체크
- 중복 바코드 필터링

### server_client.py
- 서버 연결 상태 확인
- 바코드 데이터 서버 전송
- 서버 통신 오류 처리

### monitor.py
- 주기적 시스템 상태 모니터링
- 백그라운드 스레드 관리
- 상태 로그 출력

### ui_utils.py
- 사용자 경고 메시지 표시
- GUI 팝업 관리

### main.py
- 전체 시스템 초기화 및 실행
- 각 모듈 통합 관리
- 예외 처리 및 재시도 로직

## 실행 방법

```bash
python main.py
```

## 설정 수정

`config.py` 파일에서 다음 설정들을 환경에 맞게 수정하세요:

```python
# 시리얼 통신 설정
SERIAL_PORT = 'COM9'        # Windows: 'COM3', Linux: '/dev/ttyUSB0'
BAUD_RATE = 9600

# 서버 설정
API_URL = 'http://192.168.219.110:5173/api/post'
SERVER_HOST = 'http://192.168.219.110:5173'
```

## 의존성

```bash
pip install pyserial requests
```

## 주요 기능

1. **바코드 읽기**: 시리얼 포트를 통한 바코드 데이터 수신
2. **중복 필터링**: 동일한 바코드 연속 전송 방지
3. **서버 전송**: 읽은 바코드를 REST API로 전송
4. **헬스체크**: 바코드 리더기 통신 상태 확인
5. **상태 모니터링**: 시리얼 포트, 서버, 바코드 리더 상태 주기적 확인
6. **오류 알림**: GUI 팝업을 통한 사용자 경고

## 코드 구조의 장점

- **관심사 분리**: 각 모듈이 명확한 단일 책임을 가짐
- **재사용성**: 각 기능을 독립적으로 테스트 및 수정 가능
- **유지보수성**: 모듈별로 코드 관리가 용이
- **확장성**: 새로운 기능 추가 시 해당 모듈만 수정
- **테스트**: 각 모듈을 독립적으로 단위 테스트 가능 